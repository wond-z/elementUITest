<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./lib/element-ui/lib/theme-chalk/index.css" />
    <script src="./lib/vue.min.js"></script>
    <script src="./lib/element-ui/lib/index.js"></script>
    <style type="text/css">
        .el-scrollbar__wrap {
            overflow-x: hidden;
        }
    </style>
</head>

<body>
    <div id="app">
        <el-table ref="rw_table" :data="tableData" :height="tableHeight">
            <el-table-column prop="date" label="日期" width="150"></el-table-column>
            <el-table-column prop="name" label="姓名" width="120"></el-table-column>
            <el-table-column prop="province" label="省份" width="120"></el-table-column>
            <el-table-column prop="city" label="市区" width="120"></el-table-column>
            <el-table-column prop="address" label="地址" width="300"></el-table-column>
            <el-table-column prop="address" label="地址" width="300"></el-table-column>
            <el-table-column prop="address" label="地址" width="300"></el-table-column>
            <el-table-column prop="address" label="地址" width="300"></el-table-column>
            <el-table-column prop="zip" label="邮编" width="120"></el-table-column>
        </el-table>
    </div>
    <script>
    new Vue({
        el: '#app',
        data() {
            return {
                tableData: [],
                tableHeight: 500
            }
        },
        components: {

        },
        watch: {

        },
        methods: {
            setData() {
                var self = this;
                for (let i = 0; i < 100; i++) {
                    let obj = {
                        date: '2016-05-03' + i,
                        name: '王小虎' + i,
                        province: '上海' + i,
                        city: '普陀区' + i,
                        address: '上海市普陀区金沙江路 1518 弄' + i,
                        zip: 200333 + i
                    }
                    self.tableData.push(obj);
                }
            },
            autoRoll(stop) {
                // if (stop) {
                //     clearInterval(rolltimer)
                //     return
                // }

                // 拿到表格挂载后的真实DOM
                const table = this.$refs.rw_table;
                debugger
                // 拿到表格中承载数据的div元素
                const divData = table.bodyWrapper
                // 拿到元素后，对元素进行定时增加距离顶部距离，实现滚动效果
                rolltimer = setInterval(() => {
                    // 元素自增距离顶部像素
                    divData.scrollTop += 1;
                    // 判断元素是否滚动到底部(可视高度+距离顶部=整个高度)
                    if (divData.clientHeight + divData.scrollTop == divData.scrollHeight) {
                        // 重置table距离顶部距离
                        divData.scrollTop = 0
                    }
                }, 50)
            },
        },
        mounted() {
            this.setData();
            setTimeout(() => {
                this.autoRoll();
            }, 1000)
        }
    })
    </script>
</body>

</html>